// //-----------------------------------------------------------------------------
//// <auto-generated>
////     This code was generated by XCTools.
////     Changes to this file may cause incorrect behavior and will be lost if
////     the code is regenerated.
//// </auto-generated>
////------------------------------------------------------------------------------
namespace XComponent.BenchSimpleFork.TriggeredMethod
{
    using System;
    using XComponent.BenchSimpleFork.Common;
    using XComponent.BenchSimpleFork.Common.Senders;
    using XComponent.Runtime.Shared.TriggeredMethods;
    using XComponent.Runtime.Shared.Manager;
    using XComponent.Common.Logger;
    using System.Threading;
    using System.Diagnostics;
    public partial class TriggeredMethodContext : ICustomTriggeredMethodContext
    {
        private int _nbInstances;
        private Stopwatch _stopwatch;

        public long TotalTimeMilliseconds { get { return _stopwatch.ElapsedMilliseconds; } }
        public int NbInstances { get { return _nbInstances; } }

        public void OnComponentInitialized()
        {
        }
        
        public void UnHanledException(XComponent.Runtime.StateMachine.Exceptions.TriggeredMethodException exception)
        {
        }

        public void IncrementInstances()
        {
            Interlocked.Increment(ref _nbInstances);
        }
        public void StartBench()
        {
            _nbInstances = 0;
            _stopwatch = new Stopwatch();
            _stopwatch.Start();
        }
        public void StopBench()
        {
            _stopwatch.Stop();
        }
    }
    
    public partial interface ICustomTriggeredMethodContext
    {
        long TotalTimeMilliseconds { get; }
        int NbInstances { get;  }

        void IncrementInstances();
        void StartBench();
        void StopBench();
    }
}
